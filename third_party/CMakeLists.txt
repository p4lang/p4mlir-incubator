set(FETCHCONTENT_QUIET_PREV ${FETCHCONTENT_QUIET})
set(FETCHCONTENT_QUIET OFF)

FetchContent_Declare(
  llvm
  SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/llvm-project/llvm"
  EXCLUDE_FROM_ALL
)
set(LLVM_TARGETS_TO_BUILD "Native" CACHE INTERNAL "")
set(LLVM_ENABLE_ASSERTIONS ON CACHE INTERNAL "")
set(LLVM_ENABLE_PROJECTS "mlir" CACHE INTERNAL "")
set(LLVM_INCLUDE_EXAMPLES OFF CACHE INTERNAL "")
set(LLVM_INCLUDE_TESTS OFF CACHE INTERNAL "")
set(LLVM_INCLUDE_BENCHMARKS OFF CACHE INTERNAL "")
set(LLVM_ENABLE_RTTI ON CACHE INTERNAL "")

FetchContent_MakeAvailable_But_Exclude_Install(llvm)

set(FETCHCONTENT_QUIET ${FETCHCONTENT_QUIET_PREV})

set(MLIR_INCLUDE_DIRS "${llvm_SOURCE_DIR}/../mlir/include;${llvm_BINARY_DIR}/tools/mlir/include" PARENT_SCOPE)
set(LLVM_INCLUDE_DIRS "${llvm_SOURCE_DIR}/include;${llvm_BINARY_DIR}/include" PARENT_SCOPE)
